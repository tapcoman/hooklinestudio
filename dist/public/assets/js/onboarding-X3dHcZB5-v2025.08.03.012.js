import{f as T,r as j,e as S,j as e,ax as E,i as F,Y as P}from"./react-vendor-BiQIbcdL-v2025.08.03.012.js";import{u as A,a as B,C as L,b as I,L as l,I as y,B as d,c as D,d as M}from"./index-BydpgK2q-v2025.08.03.012.js";import{T as v}from"./textarea-A0Xp9lCt-v2025.08.03.012.js";import"./vendor-9fi0qQp5-v2025.08.03.012.js";import"./utils-vendor-BTGVH9Kg-v2025.08.03.012.js";import"./ui-vendor-CLsjAtpL-v2025.08.03.012.js";const i=3;function _(){const[,u]=T(),{toast:m}=A(),{user:x,backendUser:O}=B(),[t,h]=j.useState(1),[s,b]=j.useState({company:"",industry:"",role:"",audience:"",voice:"",bannedTerms:[],safety:"standard",platforms:[],goals:[],examples:""}),g=S({mutationFn:async a=>{const r=await M("POST","/api/users",a);if(!r.ok){const n=await r.json();throw new Error(n.message||`HTTP ${r.status}`)}return r.json()},onSuccess:async a=>{m({title:"Profile created successfully!",description:"You're ready to start generating hooks."});try{const r=localStorage.getItem("firebase_token");if(r){await new Promise(c=>setTimeout(c,500));const n=await fetch("/api/auth/firebase-sync",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`}});if(n.ok){const c=await n.json()}}}catch(r){console.error("Failed to refresh backend user data:",r)}u("/app")},onError:a=>{console.error("Profile creation error:",a),m({title:"Error creating profile",description:a.message,variant:"destructive"})}}),N=()=>{t<i?h(t+1):x&&x.emailVerified?g.mutate(s):(localStorage.setItem("pendingOnboardingData",JSON.stringify(s)),u("/auth?from=onboarding"))},k=()=>{t>1?h(t-1):u("/")},o=(a,r)=>{b(n=>({...n,[a]:r}))},p=a=>{a&&!s.bannedTerms.includes(a)&&o("bannedTerms",[...s.bannedTerms,a])},w=a=>{o("bannedTerms",s.bannedTerms.filter(r=>r!==a))},f=(a,r)=>{b(n=>({...n,[a]:n[a].includes(r)?n[a].filter(c=>c!==r):[...n[a],r]}))},C=()=>{switch(t){case 1:return s.company&&s.industry&&s.role&&s.audience;case 2:return s.voice;case 3:return s.platforms.length>0&&s.goals.length>0;default:return!1}};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("div",{className:"bg-card border-b border-border px-6 py-4",children:e.jsxs("div",{className:"max-w-2xl mx-auto flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-primary rounded-xl flex items-center justify-center",children:e.jsx(E,{className:"w-4 h-4 text-primary-foreground"})}),e.jsx("span",{className:"font-semibold text-foreground",children:"Hook Line Studio"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex space-x-2",children:Array.from({length:i},(a,r)=>e.jsx("div",{className:`progress-step w-8 ${r+1<=t?"bg-primary":"bg-muted"}`},r))}),e.jsxs("span",{className:"label-text text-muted-foreground",children:["Step ",t," of ",i]})]})]})}),e.jsx("div",{className:"flex-1 flex items-center justify-center p-6",children:e.jsxs("div",{className:"max-w-xl w-full",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsxs("h2",{className:"font-serif text-foreground mb-4",children:[t===1&&"About your work",t===2&&"How you sound",t===3&&"What you make"]}),e.jsxs("p",{className:"text-muted-foreground max-w-md mx-auto leading-relaxed",children:[t===1&&"We'll use this to tailor hooks to your audience and brand.",t===2&&"We'll use this to tailor hooks to your audience and brand.",t===3&&"We'll use this to tailor hooks to your audience and brand."]})]}),e.jsx(L,{className:"card-enhanced",children:e.jsxs(I,{className:"p-8",children:[t===1&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"company",className:"label-text text-foreground mb-3 block",children:"What's your company or brand?"}),e.jsx(y,{id:"company",placeholder:"Acme Fitness",value:s.company,onChange:a=>o("company",a.target.value),className:"h-12 rounded-xl border-border"})]}),e.jsxs("div",{children:[e.jsx(l,{className:"label-text text-foreground mb-3 block",children:"What do you do?"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:["Agency","Creator","E-commerce","SaaS","Local business","Education"].map(a=>e.jsx(d,{type:"button",variant:s.industry===a.toLowerCase()?"default":"outline",onClick:()=>o("industry",a.toLowerCase()),className:"btn-enhanced justify-start h-12 rounded-xl",children:a},a))})]}),e.jsxs("div",{children:[e.jsx(l,{className:"label-text text-foreground mb-3 block",children:"Your role"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{value:"founder",label:"Founder/CEO"},{value:"marketing-manager",label:"Marketing Manager"},{value:"content-creator",label:"Content Creator"},{value:"social-media-manager",label:"Social Media Manager"},{value:"video-editor",label:"Video Editor"},{value:"freelancer",label:"Freelancer"}].map(a=>e.jsx(d,{type:"button",variant:s.role===a.value?"default":"outline",onClick:()=>o("role",a.value),className:"btn-enhanced justify-start h-12 rounded-xl",children:a.label},a.value))})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"audience",className:"label-text text-foreground mb-3 block",children:"Who is your primary audience?"}),e.jsx(v,{id:"audience",placeholder:"Busy parents, fitness beginners, ages 25-45",value:s.audience,onChange:a=>o("audience",a.target.value),className:"h-24 resize-none rounded-xl border-border"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Describe who you're creating content for"})]})]}),t===2&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx(l,{className:"label-text text-foreground mb-4 block",children:"Choose your voice"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:["Authoritative","Friendly","Playful","Contrarian","Luxury","Minimal"].map(a=>e.jsx(d,{type:"button",variant:s.voice===a?"default":"outline",onClick:()=>o("voice",a),className:"btn-enhanced justify-start h-12 rounded-xl",children:a},a))})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"banned-term",className:"label-text text-foreground mb-3 block",children:"Banned words or brand sensitivities?"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(y,{id:"banned-term",placeholder:"Enter a term to avoid",className:"h-12 rounded-xl border-border",onKeyPress:a=>{a.key==="Enter"&&(p(a.target.value),a.target.value="")}}),e.jsx(d,{type:"button",variant:"outline",className:"btn-enhanced h-12 px-6 rounded-xl",onClick:()=>{const a=document.getElementById("banned-term");p(a.value),a.value=""},children:"Add"})]}),s.bannedTerms.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-4",children:s.bannedTerms.map(a=>e.jsxs(D,{variant:"secondary",className:"cursor-pointer px-3 py-1 rounded-full hover:bg-muted",onClick:()=>w(a),children:[a," Ã—"]},a))})]}),e.jsxs("div",{children:[e.jsx(l,{className:"label-text text-foreground mb-4 block",children:"Safe-mode level"}),e.jsx("div",{className:"space-y-3",children:[{value:"family-friendly",label:"Family-friendly",desc:"Safe for all audiences"},{value:"standard",label:"Standard",desc:"Professional but engaging"},{value:"edgy",label:"Edgy",desc:"Bold and attention-grabbing"}].map(a=>e.jsx(d,{type:"button",variant:s.safety===a.value?"default":"outline",onClick:()=>o("safety",a.value),className:"btn-enhanced w-full justify-start h-auto p-4 rounded-xl text-left",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:a.label}),e.jsx("div",{className:"text-sm opacity-70 mt-1",children:a.desc})]})},a.value))})]})]}),t===3&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx(l,{className:"label-text text-foreground mb-4 block",children:"Primary platforms"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:["TikTok","Instagram","YouTube"].map(a=>e.jsxs(d,{type:"button",variant:s.platforms.includes(a)?"default":"outline",onClick:()=>f("platforms",a),className:"btn-enhanced h-16 rounded-xl flex-col gap-1",children:[e.jsx("span",{className:"text-lg",children:a==="TikTok"?"ðŸŽµ":a==="Instagram"?"ðŸ“·":"ðŸ“º"}),e.jsx("span",{className:"text-xs",children:a==="Instagram"?"Reels":a==="YouTube"?"Shorts":a})]},a))})]}),e.jsxs("div",{children:[e.jsx(l,{className:"label-text text-foreground mb-4 block",children:"Top 3 content goals"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:["Views","Shares/Sends","Saves","Click-through","Follows"].map(a=>e.jsx(d,{type:"button",variant:s.goals.includes(a)?"default":"outline",onClick:()=>f("goals",a),className:"btn-enhanced justify-start h-12 rounded-xl",disabled:!s.goals.includes(a)&&s.goals.length>=3,children:a},a))})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"examples",className:"label-text text-foreground mb-3 block",children:"Examples of past hooks you liked (optional)"}),e.jsx(v,{id:"examples",placeholder:"Paste 1-3 examples of hooks that worked well for you...",value:s.examples,onChange:a=>o("examples",a.target.value),className:"h-24 resize-none rounded-xl border-border"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"This helps us understand your style preferences"})]})]}),e.jsxs("div",{className:"flex justify-between pt-12",children:[e.jsxs(d,{variant:"ghost",onClick:k,className:"btn-enhanced h-12 px-6 rounded-xl",children:[e.jsx(F,{className:"w-4 h-4 mr-2"}),"Back"]}),e.jsxs(d,{onClick:N,disabled:!C()||g.isPending,className:"btn-enhanced h-12 px-8 rounded-xl bg-primary hover:bg-primary/90 text-primary-foreground",children:[t===i?"Create Account & Save Profile":"Continue",t<i&&e.jsx(P,{className:"w-4 h-4 ml-2"})]})]})]})})]})})]})}export{_ as default};
