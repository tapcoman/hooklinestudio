import{r as u,e as z,j as e,E as L,aa as f,aL as M,aB as v,bp as B,ax as F,al as P,F as R,I as _,Z as U}from"./react-vendor-BiQIbcdL-v2025.08.03.012.js";import{u as $,d as I,C as j,b,o as D,c as l,B as n,T as q,v as G,w as h,x as N}from"./index-BydpgK2q-v2025.08.03.012.js";import{S as Z}from"./separator-BNOFNUFA-v2025.08.03.012.js";import{m as O,A as J}from"./ui-vendor-CLsjAtpL-v2025.08.03.012.js";import"./vendor-9fi0qQp5-v2025.08.03.012.js";import"./utils-vendor-BTGVH9Kg-v2025.08.03.012.js";function se({generation:r,userId:A}){const[g,w]=u.useState(null),[i,V]=u.useState(new Set),{toast:m}=$(),c=u.useMemo(()=>(r.hooks||[]).map((s,t)=>{var o,d,p,S,C,T;return{verbalHook:s.verbalHook||s.hook||s.text||"",visualHook:s.visualHook||((o=s.platformSpecific)==null?void 0:o.tiktokColdOpen)||((d=s.platformSpecific)==null?void 0:d.instagramOverlay)||((p=s.platformSpecific)==null?void 0:p.youtubeProofCue)||"",textualHook:s.textualHook||((S=s.platformSpecific)==null?void 0:S.instagramOverlay)||((C=s.platformSpecific)==null?void 0:C.youtubeProofCue)||"",framework:s.framework||"Direct",psychologicalDriver:s.psychologicalDriver||"Value",hookCategory:s.hookCategory||"Statement-Based",riskFactor:s.riskFactor||"low",score:Math.round((s.score||3.5)*10)/10,wordCount:s.wordCount||s.word_count||((T=s.verbalHook)==null?void 0:T.split(" ").length)||0,scoreBreakdown:s.scoreBreakdown||`Score: ${s.score||3.5}/5`,rationale:s.rationale||"Effective hook for target audience",platformNotes:s.platformNotes||"",contentTypeStrategy:s.contentTypeStrategy||"value_hit",platformSpecific:s.platformSpecific,promiseContentMatch:s.promiseContentMatch!==!1,specificityScore:s.specificityScore||.8,freshnessScore:s.freshnessScore||.7}}),[r.hooks]),a=c.length?c.reduce((s,t)=>t.score>s.score?t:s):null,y=async s=>{try{await navigator.clipboard.writeText(s),w(s),m({title:"Copied to clipboard!",variant:"default"}),setTimeout(()=>w(null),2e3)}catch{m({title:"Failed to copy",variant:"destructive"})}},x=z({mutationFn:async({hook:s,hookData:t,framework:o,platformNotes:d})=>(await I("POST","/api/favorites",{userId:A,hook:s,hookData:t,framework:o,platformNotes:d,topic:r.topic,platform:r.platform})).json(),onSuccess:(s,t)=>{V(o=>new Set([...o,t.hook])),m({title:"Saved to favorites!",variant:"default"})},onError:()=>{m({title:"Failed to save favorite",variant:"destructive"})}}),E=s=>{const t=s.toLowerCase();return t==="tiktok"?"🎵":t==="instagram"?"📸":t==="youtube"?"▶️":"📱"},H=s=>({"Open Loop":"bg-purple-100 text-purple-800",PPP:"bg-green-100 text-green-800","Problem-Promise-Proof":"bg-green-100 text-green-800","4U":"bg-blue-100 text-blue-800",AIDA:"bg-orange-100 text-orange-800",PAS:"bg-red-100 text-red-800",Direct:"bg-gray-100 text-gray-800"})[s]||"bg-slate-100 text-slate-800",k=s=>({low:"bg-green-100 text-green-800",medium:"bg-yellow-100 text-yellow-800",high:"bg-red-100 text-red-800"})[s]||"bg-gray-100 text-gray-800";return!c||c.length===0?e.jsx(j,{children:e.jsx(b,{className:"p-8 text-center",children:e.jsx("p",{className:"text-slate-600",children:"No hooks generated yet."})})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(j,{children:[e.jsx(D,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Tri-Modal Hook Generation Results"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(l,{variant:"secondary",className:"bg-slate-200 text-slate-700",children:[E(r.platform)," ",r.platform.charAt(0).toUpperCase()+r.platform.slice(1)]}),e.jsx(l,{variant:"secondary",className:"bg-emerald-100 text-emerald-800",children:r.objective.replace("_"," ").toUpperCase()})]})]})}),e.jsxs(b,{children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg border border-blue-200 p-4 mb-4",children:[e.jsx("p",{className:"text-sm font-medium text-blue-900 mb-1",children:"Original Topic:"}),e.jsx("p",{className:"text-blue-800",children:r.topic})]}),a&&e.jsxs(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-emerald-50 to-blue-50 rounded-lg border border-emerald-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center",children:[e.jsx(L,{className:"w-5 h-5 text-yellow-500 mr-2"}),"Best Hook (Score: ",a.score,"/5)"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>y(a.verbalHook),className:"text-emerald-700 border-emerald-300 hover:bg-emerald-100",children:[g===a.verbalHook?e.jsx(f,{className:"w-4 h-4"}):e.jsx(M,{className:"w-4 h-4"}),"Copy Best"]}),e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>x.mutate({hook:a.verbalHook,hookData:{verbalHook:a.verbalHook,visualHook:a.visualHook,textualHook:a.textualHook,framework:a.framework,psychologicalDriver:a.psychologicalDriver,hookCategory:a.hookCategory,score:a.score,scoreBreakdown:a.scoreBreakdown,rationale:a.rationale,platformNotes:a.platformNotes,platformSpecific:a.platformSpecific},framework:a.framework,platformNotes:a.platformNotes}),disabled:i.has(a.verbalHook),className:"text-emerald-700 border-emerald-300 hover:bg-emerald-100",children:[e.jsx(v,{className:`w-4 h-4 ${i.has(a.verbalHook)?"fill-current":""}`}),"Save Best"]}),e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>x.mutate({hook:a.verbalHook,framework:a.framework,platformNotes:a.platformNotes}),disabled:i.has(a.verbalHook),className:"text-pink-700 border-pink-300 hover:bg-pink-100",children:[e.jsx(v,{className:`w-4 h-4 ${i.has(a.verbalHook)?"fill-current":""}`}),"Save"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-3",children:[e.jsxs("div",{className:"bg-white rounded-lg p-3 border",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(B,{className:"w-4 h-4 text-blue-600 mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Verbal Hook"})]}),e.jsxs("p",{className:"text-sm text-slate-900 font-medium",children:['"',a.verbalHook,'"']})]}),a.visualHook&&e.jsxs("div",{className:"bg-white rounded-lg p-3 border",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(F,{className:"w-4 h-4 text-purple-600 mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Visual Direction"})]}),e.jsx("p",{className:"text-sm text-slate-700",children:a.visualHook})]}),a.textualHook&&e.jsxs("div",{className:"bg-white rounded-lg p-3 border",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(P,{className:"w-4 h-4 text-green-600 mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Text Overlay"})]}),e.jsxs("p",{className:"text-sm text-slate-700",children:['"',a.textualHook,'"']})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-2",children:[e.jsx(l,{className:H(a.framework),children:a.framework}),e.jsx(l,{variant:"outline",className:"text-xs",children:a.psychologicalDriver}),e.jsx(l,{variant:"outline",className:"text-xs",children:a.hookCategory}),e.jsxs(l,{className:k(a.riskFactor),children:[a.riskFactor," risk"]})]}),e.jsx("p",{className:"text-sm text-slate-600 mb-2",children:a.rationale}),e.jsx("p",{className:"text-xs text-slate-500",children:a.scoreBreakdown})]})]})]}),e.jsxs(j,{children:[e.jsx(D,{children:e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"All Generated Hooks"})}),e.jsx(b,{className:"p-0",children:e.jsx("div",{className:"space-y-4 p-6",children:e.jsx(J,{children:c.map((s,t)=>e.jsxs(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:t*.1},className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-slate-500",children:["#",t+1]}),e.jsx(l,{className:H(s.framework),children:s.framework}),e.jsxs(l,{variant:"outline",className:"text-xs",children:["Score: ",s.score,"/5"]}),e.jsxs(l,{className:k(s.riskFactor),children:[e.jsx(R,{className:"w-3 h-3 mr-1"}),s.riskFactor]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>y(s.verbalHook),children:g===s.verbalHook?e.jsx(f,{className:"w-4 h-4"}):e.jsx(M,{className:"w-4 h-4"})}),e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>x.mutate({hook:s.verbalHook,hookData:{verbalHook:s.verbalHook,visualHook:s.visualHook,textualHook:s.textualHook,framework:s.framework,psychologicalDriver:s.psychologicalDriver,hookCategory:s.hookCategory,score:s.score,scoreBreakdown:s.scoreBreakdown,rationale:s.rationale,platformNotes:s.platformNotes,platformSpecific:s.platformSpecific},framework:s.framework,platformNotes:s.platformNotes}),disabled:i.has(s.verbalHook),children:e.jsx(v,{className:`w-4 h-4 ${i.has(s.verbalHook)?"fill-current":""}`})})]})]}),e.jsxs(q,{defaultValue:"verbal",className:"w-full",children:[e.jsxs(G,{className:"grid w-full grid-cols-3",children:[e.jsxs(h,{value:"verbal",className:"text-xs",children:[e.jsx(B,{className:"w-4 h-4 mr-1"}),"Verbal"]}),e.jsxs(h,{value:"visual",className:"text-xs",disabled:!s.visualHook,children:[e.jsx(F,{className:"w-4 h-4 mr-1"}),"Visual"]}),e.jsxs(h,{value:"textual",className:"text-xs",disabled:!s.textualHook,children:[e.jsx(P,{className:"w-4 h-4 mr-1"}),"Text"]})]}),e.jsx(N,{value:"verbal",className:"mt-3",children:e.jsxs("div",{className:"bg-slate-50 rounded p-3",children:[e.jsxs("p",{className:"text-slate-900 font-medium",children:['"',s.verbalHook,'"']}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-xs text-slate-500",children:[e.jsxs("span",{children:[s.wordCount," words"]}),e.jsxs("span",{children:["Strategy: ",s.contentTypeStrategy.replace("_"," ")]}),e.jsxs("span",{children:["Psychology: ",s.psychologicalDriver]})]})]})}),s.visualHook&&e.jsx(N,{value:"visual",className:"mt-3",children:e.jsxs("div",{className:"bg-purple-50 rounded p-3",children:[e.jsx("p",{className:"text-slate-900",children:s.visualHook}),e.jsx("p",{className:"text-xs text-purple-600 mt-1",children:"First 1-3 seconds visual direction"})]})}),s.textualHook&&e.jsx(N,{value:"textual",className:"mt-3",children:e.jsxs("div",{className:"bg-green-50 rounded p-3",children:[e.jsxs("p",{className:"text-slate-900 font-medium",children:['"',s.textualHook,'"']}),e.jsx("p",{className:"text-xs text-green-600 mt-1",children:"On-screen text overlay for silent viewing"})]})})]}),e.jsx(Z,{className:"my-3"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-slate-700",children:s.rationale}),s.platformNotes&&e.jsxs("p",{className:"text-xs text-slate-500 bg-slate-50 p-2 rounded",children:["Platform note: ",s.platformNotes]}),e.jsxs("div",{className:"flex flex-wrap gap-2 pt-2",children:[e.jsxs("div",{className:"flex items-center text-xs text-slate-500",children:[e.jsx(_,{className:"w-3 h-3 mr-1"}),"Specificity: ",Math.round(s.specificityScore*100),"%"]}),e.jsxs("div",{className:"flex items-center text-xs text-slate-500",children:[e.jsx(U,{className:"w-3 h-3 mr-1"}),"Freshness: ",Math.round(s.freshnessScore*100),"%"]}),s.promiseContentMatch&&e.jsxs("div",{className:"flex items-center text-xs text-green-600",children:[e.jsx(f,{className:"w-3 h-3 mr-1"}),"Promise-Content Match"]})]})]})]},t))})})})]})]})}export{se as default};
