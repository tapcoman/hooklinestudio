import{P as We,R as u,r as D,a as de,c as Fe,g as Be,j as a,N as z,Z as De,y as G,C as H,G as K,H as X,e as Me,K as Z,d as Q,J as ee,B as O}from"./index-BgezxcFr.js";import{D as te,b as re,c as ne,d as ae,e as se}from"./dialog-HNascDW7.js";var fe="basil",$e=function(e){return e===3?"v3":e},me="https://js.stripe.com",Ye="".concat(me,"/").concat(fe,"/stripe.js"),qe=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,Je=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var Ve=function(e){return qe.test(e)||Je.test(e)},ze=function(){for(var e=document.querySelectorAll('script[src^="'.concat(me,'"]')),t=0;t<e.length;t++){var n=e[t];if(Ve(n.src))return n}return null},ie=function(e){var t="",n=document.createElement("script");n.src="".concat(Ye).concat(t);var s=document.head||document.body;if(!s)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return s.appendChild(n),n},Ge=function(e,t){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"7.8.0",startTime:t})},w=null,_=null,L=null,He=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}},Ke=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}},Xe=function(e){return w!==null?w:(w=new Promise(function(t,n){if(typeof window>"u"||typeof document>"u"){t(null);return}if(window.Stripe){t(window.Stripe);return}try{var s=ze();if(!(s&&e)){if(!s)s=ie(e);else if(s&&L!==null&&_!==null){var i;s.removeEventListener("load",L),s.removeEventListener("error",_),(i=s.parentNode)===null||i===void 0||i.removeChild(s),s=ie(e)}}L=Ke(t,n),_=He(n),s.addEventListener("load",L),s.addEventListener("error",_)}catch(c){n(c);return}}),w.catch(function(t){return w=null,Promise.reject(t)}))},Ze=function(e,t,n){if(e===null)return null;var s=t[0],i=s.match(/^pk_test/),c=$e(e.version),f=fe;i&&c!==f&&console.warn("Stripe.js@".concat(c," was loaded on the page, but @stripe/stripe-js@").concat("7.8.0"," expected Stripe.js@").concat(f,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var o=e.apply(void 0,t);return Ge(o,n),o},R,he=!1,ve=function(){return R||(R=Xe(null).catch(function(e){return R=null,Promise.reject(e)}),R)};Promise.resolve().then(function(){return ve()}).catch(function(r){he||console.warn(r)});var Qe=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];he=!0;var s=Date.now();return ve().then(function(i){return Ze(i,t,s)})},ye={exports:{}},et="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",tt=et,rt=tt;function ge(){}function xe(){}xe.resetWarningCache=ge;var nt=function(){function r(n,s,i,c,f,o){if(o!==rt){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}r.isRequired=r;function e(){return r}var t={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:e,element:r,elementType:r,instanceOf:e,node:r,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:xe,resetWarningCache:ge};return t.PropTypes=t,t};ye.exports=nt();var at=ye.exports;const p=We(at);function oe(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),t.push.apply(t,n)}return t}function ce(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?oe(Object(t),!0).forEach(function(n){Se(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):oe(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function U(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?U=function(e){return typeof e}:U=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(r)}function Se(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function st(r,e){if(r==null)return{};var t={},n=Object.keys(r),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(t[s]=r[s]);return t}function it(r,e){if(r==null)return{};var t=st(r,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function be(r,e){return ot(r)||ct(r,e)||lt(r,e)||ut()}function ot(r){if(Array.isArray(r))return r}function ct(r,e){var t=r&&(typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"]);if(t!=null){var n=[],s=!0,i=!1,c,f;try{for(t=t.call(r);!(s=(c=t.next()).done)&&(n.push(c.value),!(e&&n.length===e));s=!0);}catch(o){i=!0,f=o}finally{try{!s&&t.return!=null&&t.return()}finally{if(i)throw f}}return n}}function lt(r,e){if(r){if(typeof r=="string")return le(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return le(r,e)}}function le(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function ut(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var S=function(e,t,n){var s=!!n,i=u.useRef(n);u.useEffect(function(){i.current=n},[n]),u.useEffect(function(){if(!s||!e)return function(){};var c=function(){i.current&&i.current.apply(i,arguments)};return e.on(t,c),function(){e.off(t,c)}},[s,t,e,i])},M=function(e){var t=u.useRef(e);return u.useEffect(function(){t.current=e},[e]),t.current},P=function(e){return e!==null&&U(e)==="object"},pt=function(e){return P(e)&&typeof e.then=="function"},dt=function(e){return P(e)&&typeof e.elements=="function"&&typeof e.createToken=="function"&&typeof e.createPaymentMethod=="function"&&typeof e.confirmCardPayment=="function"},ue="[object Object]",ft=function r(e,t){if(!P(e)||!P(t))return e===t;var n=Array.isArray(e),s=Array.isArray(t);if(n!==s)return!1;var i=Object.prototype.toString.call(e)===ue,c=Object.prototype.toString.call(t)===ue;if(i!==c)return!1;if(!i&&!n)return e===t;var f=Object.keys(e),o=Object.keys(t);if(f.length!==o.length)return!1;for(var g={},v=0;v<f.length;v+=1)g[f[v]]=!0;for(var d=0;d<o.length;d+=1)g[o[d]]=!0;var l=Object.keys(g);if(l.length!==f.length)return!1;var N=e,E=t,C=function(T){return r(N[T],E[T])};return l.every(C)},je=function(e,t,n){return P(e)?Object.keys(e).reduce(function(s,i){var c=!P(t)||!ft(e[i],t[i]);return n.includes(i)?(c&&console.warn("Unsupported prop change: options.".concat(i," is not a mutable property.")),s):c?ce(ce({},s||{}),{},Se({},i,e[i])):s},null):null},Ce="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",pe=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ce;if(e===null||dt(e))return e;throw new Error(t)},mt=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ce;if(pt(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(s){return pe(s,t)})};var n=pe(e,t);return n===null?{tag:"empty"}:{tag:"sync",stripe:n}},ht=function(e){!e||!e._registerWrapper||!e.registerAppInfo||(e._registerWrapper({name:"react-stripe-js",version:"3.9.0"}),e.registerAppInfo({name:"react-stripe-js",version:"3.9.0",url:"https://stripe.com/docs/stripe-js/react"}))},W=u.createContext(null);W.displayName="ElementsContext";var Ee=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},Ne=function(e){var t=e.stripe,n=e.options,s=e.children,i=u.useMemo(function(){return mt(t)},[t]),c=u.useState(function(){return{stripe:i.tag==="sync"?i.stripe:null,elements:i.tag==="sync"?i.stripe.elements(n):null}}),f=be(c,2),o=f[0],g=f[1];u.useEffect(function(){var l=!0,N=function(C){g(function(k){return k.stripe?k:{stripe:C,elements:C.elements(n)}})};return i.tag==="async"&&!o.stripe?i.stripePromise.then(function(E){E&&l&&N(E)}):i.tag==="sync"&&!o.stripe&&N(i.stripe),function(){l=!1}},[i,o,n]);var v=M(t);u.useEffect(function(){v!==null&&v!==t&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[v,t]);var d=M(n);return u.useEffect(function(){if(o.elements){var l=je(n,d,["clientSecret","fonts"]);l&&o.elements.update(l)}},[n,d,o.elements]),u.useEffect(function(){ht(o.stripe)},[o.stripe]),u.createElement(W.Provider,{value:o},s)};Ne.propTypes={stripe:p.any,options:p.object};var vt=function(e){var t=u.useContext(W);return Ee(t,e)},yt=function(){var e=vt("calls useElements()"),t=e.elements;return t};p.func.isRequired;var Pe=u.createContext(null);Pe.displayName="CheckoutSdkContext";var gt=function(e,t){if(!e)throw new Error("Could not find CheckoutProvider context; You need to wrap the part of your app that ".concat(t," in an <CheckoutProvider> provider."));return e},xt=u.createContext(null);xt.displayName="CheckoutContext";p.any,p.shape({fetchClientSecret:p.func.isRequired,elementsOptions:p.object}).isRequired;var $=function(e){var t=u.useContext(Pe),n=u.useContext(W);if(t&&n)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return t?gt(t,e):Ee(n,e)},St=["mode"],bt=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},m=function(e,t){var n="".concat(bt(e),"Element"),s=function(o){var g=o.id,v=o.className,d=o.options,l=d===void 0?{}:d,N=o.onBlur,E=o.onFocus,C=o.onReady,k=o.onChange,T=o.onEscape,ke=o.onClick,we=o.onLoadError,Re=o.onLoaderStart,Oe=o.onNetworksChange,Te=o.onConfirm,Ae=o.onCancel,Ie=o.onShippingAddressChange,_e=o.onShippingRateChange,A=$("mounts <".concat(n,">")),I="elements"in A?A.elements:null,b="checkoutSdk"in A?A.checkoutSdk:null,Le=u.useState(null),Y=be(Le,2),x=Y[0],Ue=Y[1],j=u.useRef(null),F=u.useRef(null);S(x,"blur",N),S(x,"focus",E),S(x,"escape",T),S(x,"click",ke),S(x,"loaderror",we),S(x,"loaderstart",Re),S(x,"networkschange",Oe),S(x,"confirm",Te),S(x,"cancel",Ae),S(x,"shippingaddresschange",Ie),S(x,"shippingratechange",_e),S(x,"change",k);var B;C&&(e==="expressCheckout"?B=C:B=function(){C(x)}),S(x,"ready",B),u.useLayoutEffect(function(){if(j.current===null&&F.current!==null&&(I||b)){var y=null;if(b)switch(e){case"payment":y=b.createPaymentElement(l);break;case"address":if("mode"in l){var J=l.mode,V=it(l,St);if(J==="shipping")y=b.createShippingAddressElement(V);else if(J==="billing")y=b.createBillingAddressElement(V);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":y=b.createExpressCheckoutElement(l);break;case"currencySelector":y=b.createCurrencySelectorElement();break;case"taxId":y=b.createTaxIdElement(l);break;default:throw new Error("Invalid Element type ".concat(n,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else I&&(y=I.create(e,l));j.current=y,Ue(y),y&&y.mount(F.current)}},[I,b,l]);var q=M(l);return u.useEffect(function(){if(j.current){var y=je(l,q,["paymentRequest"]);y&&"update"in j.current&&j.current.update(y)}},[l,q]),u.useLayoutEffect(function(){return function(){if(j.current&&typeof j.current.destroy=="function")try{j.current.destroy(),j.current=null}catch{}}},[]),u.createElement("div",{id:g,className:v,ref:F})},i=function(o){$("mounts <".concat(n,">"));var g=o.id,v=o.className;return u.createElement("div",{id:g,className:v})},c=t?i:s;return c.propTypes={id:p.string,className:p.string,onChange:p.func,onBlur:p.func,onFocus:p.func,onReady:p.func,onEscape:p.func,onClick:p.func,onLoadError:p.func,onLoaderStart:p.func,onNetworksChange:p.func,onConfirm:p.func,onCancel:p.func,onShippingAddressChange:p.func,onShippingRateChange:p.func,options:p.object},c.displayName=n,c.__elementType=e,c},h=typeof window>"u",jt=u.createContext(null);jt.displayName="EmbeddedCheckoutProviderContext";var Ct=function(){var e=$("calls useStripe()"),t=e.stripe;return t};m("auBankAccount",h);m("card",h);m("cardNumber",h);m("cardExpiry",h);m("cardCvc",h);m("fpxBank",h);m("iban",h);m("idealBank",h);m("p24Bank",h);m("epsBank",h);var Et=m("payment",h);m("expressCheckout",h);m("currencySelector",h);m("paymentRequestButton",h);m("linkAuthentication",h);m("address",h);m("shippingAddress",h);m("paymentMethodMessaging",h);m("affirmMessage",h);m("afterpayClearpayMessage",h);m("taxId",h);const Nt=Qe(void 0),Pt=({onSuccess:r})=>{const e=Ct(),t=yt(),{toast:n}=de(),[s,i]=D.useState(!1),c=async f=>{if(f.preventDefault(),!e||!t)return;i(!0);const{error:o}=await e.confirmPayment({elements:t,confirmParams:{return_url:window.location.origin+"/app"}});o?n({title:"Payment Failed",description:o.message,variant:"destructive"}):(n({title:"Welcome to Pro!",description:"Your subscription is now active. Enjoy unlimited hook generation!"}),r()),i(!1)};return a.jsxs("form",{onSubmit:c,className:"space-y-4",children:[a.jsx(Et,{}),a.jsx(O,{type:"submit",disabled:!e||s,className:"w-full",size:"lg",children:s?"Processing...":"Start Pro Subscription"})]})};function Rt({isOpen:r,onClose:e,showDiscountOffer:t=!1,currentCredits:n=0}){const[s,i]=D.useState(null),[c,f]=D.useState(!1),{toast:o}=de(),g=Fe({mutationFn:async d=>(await Be("POST","/api/stripe/create-subscription",d)).json(),onSuccess:d=>{d.clientSecret?i(d.clientSecret):(o({title:"Subscription Created",description:"Your subscription is now active!"}),e())},onError:d=>{o({title:"Failed to create subscription",description:d.message,variant:"destructive"})}}),v=(d,l=!1)=>{f(!0),g.mutate({plan:d,promotionCode:l?"FIRST_MONTH_20":void 0})};return s?a.jsx(te,{open:r,onOpenChange:e,children:a.jsxs(re,{className:"max-w-md",children:[a.jsxs(ne,{children:[a.jsxs(ae,{className:"flex items-center gap-2",children:[a.jsx(z,{className:"w-5 h-5 text-primary"}),"Complete Your Subscription"]}),a.jsx(se,{children:"Complete your payment to start unlimited hook generation"})]}),a.jsx(Ne,{stripe:Nt,options:{clientSecret:s},children:a.jsx(Pt,{onSuccess:e})})]})}):a.jsx(te,{open:r,onOpenChange:e,children:a.jsxs(re,{className:"max-w-4xl max-h-[85vh] overflow-y-auto",children:[a.jsxs(ne,{children:[a.jsxs(ae,{className:"flex items-center gap-2",children:[a.jsx(De,{className:"w-5 h-5 text-primary"}),t?"Special Offer - Credit Limit Reached!":"Upgrade to Pro"]}),a.jsx(se,{children:t?`You've used all ${n} free credits. Upgrade now with 20% off your first month!`:"Get unlimited hook generation and advanced features"})]}),a.jsxs("div",{className:"space-y-6",children:[t&&a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-red-800",children:[a.jsx(G,{className:"w-4 h-4"}),a.jsx("span",{className:"font-medium",children:"Credits Exhausted"})]}),a.jsxs("p",{className:"text-sm text-red-600 mt-1",children:["You've reached your monthly limit of ",n," free hooks. Upgrade to continue generating unlimited content."]})]}),a.jsxs("div",{className:"grid gap-4",children:[a.jsxs(H,{className:"border-primary/20 bg-gradient-to-br from-primary/5 to-secondary/5",children:[a.jsxs(K,{className:"text-center pb-4",children:[a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx(z,{className:"w-6 h-6 text-primary"}),a.jsx(X,{className:"text-2xl",children:"Creator Plan"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t&&a.jsx("span",{className:"text-lg text-slate-500 line-through",children:"$15.00"}),a.jsxs("span",{className:"text-3xl font-bold text-primary",children:["$",t?"12.00":"15.00"]}),a.jsx("span",{className:"text-slate-600",children:"/month"})]}),t&&a.jsx(Me,{variant:"secondary",className:"bg-green-100 text-green-800 border-green-200",children:"20% OFF First Month"})]}),a.jsx(Z,{className:"text-center",children:"For weekly posting • Cancel anytime"})]}),a.jsxs(Q,{className:"space-y-4",children:[a.jsx("div",{className:"space-y-3",children:["200 Pro generations/month","Unlimited Draft generations","Cold-open exports","Email support"].map((d,l)=>a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(ee,{className:"w-4 h-4 text-green-600 flex-shrink-0"}),a.jsx("span",{className:"text-sm",children:d})]},l))}),a.jsx("div",{className:"space-y-3 pt-4",children:t?a.jsxs(a.Fragment,{children:[a.jsx(O,{onClick:()=>v("creator",!0),disabled:c,className:"w-full bg-green-600 hover:bg-green-700",size:"lg",children:c?"Setting up...":"Claim Pro - 20% Discount"}),a.jsx(O,{onClick:()=>v("creator",!1),disabled:c,variant:"outline",className:"w-full",children:"Continue at Regular Price"})]}):a.jsx(O,{onClick:()=>v("creator",!1),disabled:c,className:"w-full",size:"lg",children:c?"Setting up...":"Start Creator - $15/month"})}),a.jsx("p",{className:"text-xs text-slate-500 text-center",children:"Trial includes full Pro features. You can cancel anytime during the trial period."})]})]}),a.jsxs(H,{className:"border-slate-200 bg-gradient-to-br from-slate-50 to-slate-100",children:[a.jsxs(K,{className:"text-center pb-4",children:[a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx(G,{className:"w-6 h-6 text-slate-600"}),a.jsx(X,{className:"text-2xl text-slate-900",children:"Teams Plan"})]}),a.jsx("div",{className:"space-y-2",children:a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx("span",{className:"text-3xl font-bold text-slate-900",children:"$59.00"}),a.jsx("span",{className:"text-slate-600",children:"/month"})]})}),a.jsx(Z,{className:"text-center",children:"For studios & agencies • Cancel anytime"})]}),a.jsxs(Q,{className:"space-y-4",children:[a.jsx("div",{className:"space-y-3",children:["1,500 pooled Pro generations","3 seats","Shared style guide","Priority support"].map((d,l)=>a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(ee,{className:"w-4 h-4 text-green-600 flex-shrink-0"}),a.jsx("span",{className:"text-sm",children:d})]},l))}),a.jsx("div",{className:"space-y-3 pt-4",children:a.jsx(O,{onClick:()=>v("teams",!1),disabled:c,variant:"outline",className:"w-full border-slate-300 hover:bg-slate-50",size:"lg",children:c?"Setting up...":"Start Teams - 7-Day Free Trial"})}),a.jsx("p",{className:"text-xs text-slate-500 text-center",children:"Perfect for teams and agencies. Includes collaboration tools and priority support."})]})]})]})]})]})})}export{Rt as S};
