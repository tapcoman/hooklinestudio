import{h as O,r as x,a as V,c as z,g as A,j as e,C as p,d as u,G as H,e as l,aO as k,y as E,B as c,J as f,E as S,aN as R,aP as L,aQ as U,aR as _,aS as v,aT as j,aU as $,Z as q}from"./index-BNCjXCrl-v2025.08.03.001.js";import{S as G}from"./separator-C4V3gREb-v2025.08.03.001.js";import{C,H as h}from"./dropdown-menu-DAVwaGlv-v2025.08.03.001.js";import{V as M}from"./video-BaoH_Dfd-v2025.08.03.001.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=O("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);function W({generation:r,userId:P}){const[N,b]=x.useState(null),[i,B]=x.useState(new Set),{toast:n}=V(),o=x.useMemo(()=>(r.hooks||[]).map((s,t)=>({verbalHook:s.verbalHook||s.hook||s.text||"",visualHook:s.visualHook||s.platformSpecific?.tiktokColdOpen||s.platformSpecific?.instagramOverlay||s.platformSpecific?.youtubeProofCue||"",textualHook:s.textualHook||s.platformSpecific?.instagramOverlay||s.platformSpecific?.youtubeProofCue||"",framework:s.framework||"Direct",psychologicalDriver:s.psychologicalDriver||"Value",hookCategory:s.hookCategory||"Statement-Based",riskFactor:s.riskFactor||"low",score:Math.round((s.score||3.5)*10)/10,wordCount:s.wordCount||s.word_count||s.verbalHook?.split(" ").length||0,scoreBreakdown:s.scoreBreakdown||`Score: ${s.score||3.5}/5`,rationale:s.rationale||"Effective hook for target audience",platformNotes:s.platformNotes||"",contentTypeStrategy:s.contentTypeStrategy||"value_hit",platformSpecific:s.platformSpecific,promiseContentMatch:s.promiseContentMatch!==!1,specificityScore:s.specificityScore||.8,freshnessScore:s.freshnessScore||.7})),[r.hooks]),a=o.length?o.reduce((s,t)=>t.score>s.score?t:s):null,g=async s=>{try{await navigator.clipboard.writeText(s),b(s),n({title:"Copied to clipboard!",variant:"default"}),setTimeout(()=>b(null),2e3)}catch{n({title:"Failed to copy",variant:"destructive"})}},m=z({mutationFn:async({hook:s,hookData:t,framework:d,platformNotes:F})=>(await A("POST","/api/favorites",{userId:P,hook:s,hookData:t,framework:d,platformNotes:F,topic:r.topic,platform:r.platform})).json(),onSuccess:(s,t)=>{B(d=>new Set([...d,t.hook])),n({title:"Saved to favorites!",variant:"default"})},onError:()=>{n({title:"Failed to save favorite",variant:"destructive"})}}),D=s=>{const t=s.toLowerCase();return t==="tiktok"?"🎵":t==="instagram"?"📸":t==="youtube"?"▶️":"📱"},y=s=>({"Open Loop":"bg-purple-100 text-purple-800",PPP:"bg-green-100 text-green-800","Problem-Promise-Proof":"bg-green-100 text-green-800","4U":"bg-blue-100 text-blue-800",AIDA:"bg-orange-100 text-orange-800",PAS:"bg-red-100 text-red-800",Direct:"bg-gray-100 text-gray-800"})[s]||"bg-slate-100 text-slate-800",w=s=>({low:"bg-green-100 text-green-800",medium:"bg-yellow-100 text-yellow-800",high:"bg-red-100 text-red-800"})[s]||"bg-gray-100 text-gray-800";return!o||o.length===0?e.jsx(p,{children:e.jsx(u,{className:"p-8 text-center",children:e.jsx("p",{className:"text-slate-600",children:"No hooks generated yet."})})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(p,{children:[e.jsx(H,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Tri-Modal Hook Generation Results"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(l,{variant:"secondary",className:"bg-slate-200 text-slate-700",children:[D(r.platform)," ",r.platform.charAt(0).toUpperCase()+r.platform.slice(1)]}),e.jsx(l,{variant:"secondary",className:"bg-emerald-100 text-emerald-800",children:r.objective.replace("_"," ").toUpperCase()})]})]})}),e.jsxs(u,{children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg border border-blue-200 p-4 mb-4",children:[e.jsx("p",{className:"text-sm font-medium text-blue-900 mb-1",children:"Original Topic:"}),e.jsx("p",{className:"text-blue-800",children:r.topic})]}),a&&e.jsxs(k.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-emerald-50 to-blue-50 rounded-lg border border-emerald-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center",children:[e.jsx(E,{className:"w-5 h-5 text-yellow-500 mr-2"}),"Best Hook (Score: ",a.score,"/5)"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>g(a.verbalHook),className:"text-emerald-700 border-emerald-300 hover:bg-emerald-100",children:[N===a.verbalHook?e.jsx(f,{className:"w-4 h-4"}):e.jsx(C,{className:"w-4 h-4"}),"Copy Best"]}),e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>m.mutate({hook:a.verbalHook,hookData:{verbalHook:a.verbalHook,visualHook:a.visualHook,textualHook:a.textualHook,framework:a.framework,psychologicalDriver:a.psychologicalDriver,hookCategory:a.hookCategory,score:a.score,scoreBreakdown:a.scoreBreakdown,rationale:a.rationale,platformNotes:a.platformNotes,platformSpecific:a.platformSpecific},framework:a.framework,platformNotes:a.platformNotes}),disabled:i.has(a.verbalHook),className:"text-emerald-700 border-emerald-300 hover:bg-emerald-100",children:[e.jsx(h,{className:`w-4 h-4 ${i.has(a.verbalHook)?"fill-current":""}`}),"Save Best"]}),e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>m.mutate({hook:a.verbalHook,framework:a.framework,platformNotes:a.platformNotes}),disabled:i.has(a.verbalHook),className:"text-pink-700 border-pink-300 hover:bg-pink-100",children:[e.jsx(h,{className:`w-4 h-4 ${i.has(a.verbalHook)?"fill-current":""}`}),"Save"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-3",children:[e.jsxs("div",{className:"bg-white rounded-lg p-3 border",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(T,{className:"w-4 h-4 text-blue-600 mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Verbal Hook"})]}),e.jsxs("p",{className:"text-sm text-slate-900 font-medium",children:['"',a.verbalHook,'"']})]}),a.visualHook&&e.jsxs("div",{className:"bg-white rounded-lg p-3 border",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(M,{className:"w-4 h-4 text-purple-600 mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Visual Direction"})]}),e.jsx("p",{className:"text-sm text-slate-700",children:a.visualHook})]}),a.textualHook&&e.jsxs("div",{className:"bg-white rounded-lg p-3 border",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(S,{className:"w-4 h-4 text-green-600 mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Text Overlay"})]}),e.jsxs("p",{className:"text-sm text-slate-700",children:['"',a.textualHook,'"']})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-2",children:[e.jsx(l,{className:y(a.framework),children:a.framework}),e.jsx(l,{variant:"outline",className:"text-xs",children:a.psychologicalDriver}),e.jsx(l,{variant:"outline",className:"text-xs",children:a.hookCategory}),e.jsxs(l,{className:w(a.riskFactor),children:[a.riskFactor," risk"]})]}),e.jsx("p",{className:"text-sm text-slate-600 mb-2",children:a.rationale}),e.jsx("p",{className:"text-xs text-slate-500",children:a.scoreBreakdown})]})]})]}),e.jsxs(p,{children:[e.jsx(H,{children:e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"All Generated Hooks"})}),e.jsx(u,{className:"p-0",children:e.jsx("div",{className:"space-y-4 p-6",children:e.jsx(R,{children:o.map((s,t)=>e.jsxs(k.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:t*.1},className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-slate-500",children:["#",t+1]}),e.jsx(l,{className:y(s.framework),children:s.framework}),e.jsxs(l,{variant:"outline",className:"text-xs",children:["Score: ",s.score,"/5"]}),e.jsxs(l,{className:w(s.riskFactor),children:[e.jsx(L,{className:"w-3 h-3 mr-1"}),s.riskFactor]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{variant:"ghost",size:"sm",onClick:()=>g(s.verbalHook),children:N===s.verbalHook?e.jsx(f,{className:"w-4 h-4"}):e.jsx(C,{className:"w-4 h-4"})}),e.jsx(c,{variant:"ghost",size:"sm",onClick:()=>m.mutate({hook:s.verbalHook,hookData:{verbalHook:s.verbalHook,visualHook:s.visualHook,textualHook:s.textualHook,framework:s.framework,psychologicalDriver:s.psychologicalDriver,hookCategory:s.hookCategory,score:s.score,scoreBreakdown:s.scoreBreakdown,rationale:s.rationale,platformNotes:s.platformNotes,platformSpecific:s.platformSpecific},framework:s.framework,platformNotes:s.platformNotes}),disabled:i.has(s.verbalHook),children:e.jsx(h,{className:`w-4 h-4 ${i.has(s.verbalHook)?"fill-current":""}`})})]})]}),e.jsxs(U,{defaultValue:"verbal",className:"w-full",children:[e.jsxs(_,{className:"grid w-full grid-cols-3",children:[e.jsxs(v,{value:"verbal",className:"text-xs",children:[e.jsx(T,{className:"w-4 h-4 mr-1"}),"Verbal"]}),e.jsxs(v,{value:"visual",className:"text-xs",disabled:!s.visualHook,children:[e.jsx(M,{className:"w-4 h-4 mr-1"}),"Visual"]}),e.jsxs(v,{value:"textual",className:"text-xs",disabled:!s.textualHook,children:[e.jsx(S,{className:"w-4 h-4 mr-1"}),"Text"]})]}),e.jsx(j,{value:"verbal",className:"mt-3",children:e.jsxs("div",{className:"bg-slate-50 rounded p-3",children:[e.jsxs("p",{className:"text-slate-900 font-medium",children:['"',s.verbalHook,'"']}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-xs text-slate-500",children:[e.jsxs("span",{children:[s.wordCount," words"]}),e.jsxs("span",{children:["Strategy: ",s.contentTypeStrategy.replace("_"," ")]}),e.jsxs("span",{children:["Psychology: ",s.psychologicalDriver]})]})]})}),s.visualHook&&e.jsx(j,{value:"visual",className:"mt-3",children:e.jsxs("div",{className:"bg-purple-50 rounded p-3",children:[e.jsx("p",{className:"text-slate-900",children:s.visualHook}),e.jsx("p",{className:"text-xs text-purple-600 mt-1",children:"First 1-3 seconds visual direction"})]})}),s.textualHook&&e.jsx(j,{value:"textual",className:"mt-3",children:e.jsxs("div",{className:"bg-green-50 rounded p-3",children:[e.jsxs("p",{className:"text-slate-900 font-medium",children:['"',s.textualHook,'"']}),e.jsx("p",{className:"text-xs text-green-600 mt-1",children:"On-screen text overlay for silent viewing"})]})})]}),e.jsx(G,{className:"my-3"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-slate-700",children:s.rationale}),s.platformNotes&&e.jsxs("p",{className:"text-xs text-slate-500 bg-slate-50 p-2 rounded",children:["Platform note: ",s.platformNotes]}),e.jsxs("div",{className:"flex flex-wrap gap-2 pt-2",children:[e.jsxs("div",{className:"flex items-center text-xs text-slate-500",children:[e.jsx($,{className:"w-3 h-3 mr-1"}),"Specificity: ",Math.round(s.specificityScore*100),"%"]}),e.jsxs("div",{className:"flex items-center text-xs text-slate-500",children:[e.jsx(q,{className:"w-3 h-3 mr-1"}),"Freshness: ",Math.round(s.freshnessScore*100),"%"]}),s.promiseContentMatch&&e.jsxs("div",{className:"flex items-center text-xs text-green-600",children:[e.jsx(f,{className:"w-3 h-3 mr-1"}),"Promise-Content Match"]})]})]})]},t))})})})]})]})}export{W as default};
