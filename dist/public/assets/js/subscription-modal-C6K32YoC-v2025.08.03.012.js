import{r as h,e as T,j as e,aq as u,aX as Y,Z as D,E as j,aa as g,aY as M,aZ as R,a_ as $}from"./react-vendor-BiQIbcdL-v2025.08.03.012.js";import{u as F,d as z,C as N,o as f,p as y,c as I,r as b,b as v,B as o}from"./index-BydpgK2q-v2025.08.03.012.js";import{D as S,b as C,c as P,d as w,e as k}from"./dialog-cUpoTIFT-v2025.08.03.012.js";import{Y as U}from"./vendor-9fi0qQp5-v2025.08.03.012.js";const _=U(void 0),B=({onSuccess:d})=>{const r=M(),a=R(),{toast:n}=F(),[l,m]=h.useState(!1),t=async p=>{if(p.preventDefault(),!r||!a)return;m(!0);const{error:c}=await r.confirmPayment({elements:a,confirmParams:{return_url:window.location.origin+"/app"}});c?n({title:"Payment Failed",description:c.message,variant:"destructive"}):(n({title:"Welcome to Pro!",description:"Your subscription is now active. Enjoy unlimited hook generation!"}),d()),m(!1)};return e.jsxs("form",{onSubmit:t,className:"space-y-4",children:[e.jsx($,{}),e.jsx(o,{type:"submit",disabled:!r||l,className:"w-full",size:"lg",children:l?"Processing...":"Start Pro Subscription"})]})};function G({isOpen:d,onClose:r,showDiscountOffer:a=!1,currentCredits:n=0}){const[l,m]=h.useState(null),[t,p]=h.useState(!1),{toast:c}=F(),E=T({mutationFn:async s=>(await z("POST","/api/stripe/create-subscription",s)).json(),onSuccess:s=>{s.clientSecret?m(s.clientSecret):(c({title:"Subscription Created",description:"Your subscription is now active!"}),r())},onError:s=>{c({title:"Failed to create subscription",description:s.message,variant:"destructive"})}}),x=(s,i=!1)=>{p(!0),E.mutate({plan:s,promotionCode:i?"FIRST_MONTH_20":void 0})};return l?e.jsx(S,{open:d,onOpenChange:r,children:e.jsxs(C,{className:"max-w-md",children:[e.jsxs(P,{children:[e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(u,{className:"w-5 h-5 text-primary"}),"Complete Your Subscription"]}),e.jsx(k,{children:"Complete your payment to start unlimited hook generation"})]}),e.jsx(Y,{stripe:_,options:{clientSecret:l},children:e.jsx(B,{onSuccess:r})})]})}):e.jsx(S,{open:d,onOpenChange:r,children:e.jsxs(C,{className:"max-w-4xl max-h-[85vh] overflow-y-auto",children:[e.jsxs(P,{children:[e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(D,{className:"w-5 h-5 text-primary"}),a?"Special Offer - Credit Limit Reached!":"Upgrade to Pro"]}),e.jsx(k,{children:a?`You've used all ${n} free credits. Upgrade now with 20% off your first month!`:"Get unlimited hook generation and advanced features"})]}),e.jsxs("div",{className:"space-y-6",children:[a&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-red-800",children:[e.jsx(j,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"Credits Exhausted"})]}),e.jsxs("p",{className:"text-sm text-red-600 mt-1",children:["You've reached your monthly limit of ",n," free hooks. Upgrade to continue generating unlimited content."]})]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs(N,{className:"border-primary/20 bg-gradient-to-br from-primary/5 to-secondary/5",children:[e.jsxs(f,{className:"text-center pb-4",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(u,{className:"w-6 h-6 text-primary"}),e.jsx(y,{className:"text-2xl",children:"Creator Plan"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a&&e.jsx("span",{className:"text-lg text-slate-500 line-through",children:"$15.00"}),e.jsxs("span",{className:"text-3xl font-bold text-primary",children:["$",a?"12.00":"15.00"]}),e.jsx("span",{className:"text-slate-600",children:"/month"})]}),a&&e.jsx(I,{variant:"secondary",className:"bg-green-100 text-green-800 border-green-200",children:"20% OFF First Month"})]}),e.jsx(b,{className:"text-center",children:"For weekly posting • Cancel anytime"})]}),e.jsxs(v,{className:"space-y-4",children:[e.jsx("div",{className:"space-y-3",children:["200 Pro generations/month","Unlimited Draft generations","Cold-open exports","Email support"].map((s,i)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(g,{className:"w-4 h-4 text-green-600 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:s})]},i))}),e.jsx("div",{className:"space-y-3 pt-4",children:a?e.jsxs(e.Fragment,{children:[e.jsx(o,{onClick:()=>x("creator",!0),disabled:t,className:"w-full bg-green-600 hover:bg-green-700",size:"lg",children:t?"Setting up...":"Claim Pro - 20% Discount"}),e.jsx(o,{onClick:()=>x("creator",!1),disabled:t,variant:"outline",className:"w-full",children:"Continue at Regular Price"})]}):e.jsx(o,{onClick:()=>x("creator",!1),disabled:t,className:"w-full",size:"lg",children:t?"Setting up...":"Start Creator - $15/month"})}),e.jsx("p",{className:"text-xs text-slate-500 text-center",children:"Trial includes full Pro features. You can cancel anytime during the trial period."})]})]}),e.jsxs(N,{className:"border-slate-200 bg-gradient-to-br from-slate-50 to-slate-100",children:[e.jsxs(f,{className:"text-center pb-4",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(j,{className:"w-6 h-6 text-slate-600"}),e.jsx(y,{className:"text-2xl text-slate-900",children:"Teams Plan"})]}),e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-slate-900",children:"$59.00"}),e.jsx("span",{className:"text-slate-600",children:"/month"})]})}),e.jsx(b,{className:"text-center",children:"For studios & agencies • Cancel anytime"})]}),e.jsxs(v,{className:"space-y-4",children:[e.jsx("div",{className:"space-y-3",children:["1,500 pooled Pro generations","3 seats","Shared style guide","Priority support"].map((s,i)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(g,{className:"w-4 h-4 text-green-600 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:s})]},i))}),e.jsx("div",{className:"space-y-3 pt-4",children:e.jsx(o,{onClick:()=>x("teams",!1),disabled:t,variant:"outline",className:"w-full border-slate-300 hover:bg-slate-50",size:"lg",children:t?"Setting up...":"Start Teams - 7-Day Free Trial"})}),e.jsx("p",{className:"text-xs text-slate-500 text-center",children:"Perfect for teams and agencies. Includes collaboration tools and priority support."})]})]})]})]})]})})}export{G as S};
