var lt=e=>{throw TypeError(e)};var G=(e,t,i)=>t.has(e)||lt("Cannot "+i);var s=(e,t,i)=>(G(e,t,"read from private field"),i?i.call(e):t.get(e)),p=(e,t,i)=>t.has(e)?lt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,i),h=(e,t,i,r)=>(G(e,t,"write to private field"),r?r.call(e,i):t.set(e,i),i),l=(e,t,i)=>(G(e,t,"access private method"),i);import{D as Ct,F as dt,G as g,H as J,J as B,K as X,M as Y,N as ft,O as St,P as Et,Q as Qt,R as pt,T as yt,U as Tt,V as It}from"./index-DE-Ruv-d-v2025.08.03.009.js";import{r as C}from"./ui-vendor-BAeonq7J-v2025.08.03.009.js";var v,n,H,b,I,P,S,E,A,U,D,w,x,Q,M,a,L,Z,$,q,tt,et,st,it,gt,mt,wt=(mt=class extends Ct{constructor(t,i){super();p(this,a);p(this,v);p(this,n);p(this,H);p(this,b);p(this,I);p(this,P);p(this,S);p(this,E);p(this,A);p(this,U);p(this,D);p(this,w);p(this,x);p(this,Q);p(this,M,new Set);this.options=i,h(this,v,t),h(this,E,null),h(this,S,dt()),this.options.experimental_prefetchInRender||s(this,S).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(i)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(s(this,n).addObserver(this),bt(s(this,n),this.options)?l(this,a,L).call(this):this.updateResult(),l(this,a,tt).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return rt(s(this,n),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return rt(s(this,n),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,l(this,a,et).call(this),l(this,a,st).call(this),s(this,n).removeObserver(this)}setOptions(t){const i=this.options,r=s(this,n);if(this.options=s(this,v).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof g(this.options.enabled,s(this,n))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");l(this,a,it).call(this),s(this,n).setOptions(this.options),i._defaulted&&!J(this.options,i)&&s(this,v).getQueryCache().notify({type:"observerOptionsUpdated",query:s(this,n),observer:this});const c=this.hasListeners();c&&Rt(s(this,n),r,this.options,i)&&l(this,a,L).call(this),this.updateResult(),c&&(s(this,n)!==r||g(this.options.enabled,s(this,n))!==g(i.enabled,s(this,n))||B(this.options.staleTime,s(this,n))!==B(i.staleTime,s(this,n)))&&l(this,a,Z).call(this);const u=l(this,a,$).call(this);c&&(s(this,n)!==r||g(this.options.enabled,s(this,n))!==g(i.enabled,s(this,n))||u!==s(this,Q))&&l(this,a,q).call(this,u)}getOptimisticResult(t){const i=s(this,v).getQueryCache().build(s(this,v),t),r=this.createResult(i,t);return Ft(this,r)&&(h(this,b,r),h(this,P,this.options),h(this,I,s(this,n).state)),r}getCurrentResult(){return s(this,b)}trackResult(t,i){return new Proxy(t,{get:(r,c)=>(this.trackProp(c),i?.(c),Reflect.get(r,c))})}trackProp(t){s(this,M).add(t)}getCurrentQuery(){return s(this,n)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const i=s(this,v).defaultQueryOptions(t),r=s(this,v).getQueryCache().build(s(this,v),i);return r.fetch().then(()=>this.createResult(r,i))}fetch(t){return l(this,a,L).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),s(this,b)))}createResult(t,i){const r=s(this,n),c=this.options,u=s(this,b),o=s(this,I),_=s(this,P),y=t!==r?t.state:s(this,H),{state:k}=t;let d={...k},j=!1,R;if(i._optimisticResults){const m=this.hasListeners(),V=!m&&bt(t,i),F=m&&Rt(t,r,i,c);(V||F)&&(d={...d,...Qt(k.data,t.options)}),i._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:at,errorUpdatedAt:ot,status:T}=d;R=d.data;let ht=!1;if(i.placeholderData!==void 0&&R===void 0&&T==="pending"){let m;u?.isPlaceholderData&&i.placeholderData===_?.placeholderData?(m=u.data,ht=!0):m=typeof i.placeholderData=="function"?i.placeholderData(s(this,D)?.state.data,s(this,D)):i.placeholderData,m!==void 0&&(T="success",R=pt(u?.data,m,i),j=!0)}if(i.select&&R!==void 0&&!ht)if(u&&R===o?.data&&i.select===s(this,A))R=s(this,U);else try{h(this,A,i.select),R=i.select(R),R=pt(u?.data,R,i),h(this,U,R),h(this,E,null)}catch(m){h(this,E,m)}s(this,E)&&(at=s(this,E),R=s(this,U),ot=Date.now(),T="error");const N=d.fetchStatus==="fetching",W=T==="pending",K=T==="error",ct=W&&N,ut=R!==void 0,O={status:T,fetchStatus:d.fetchStatus,isPending:W,isSuccess:T==="success",isError:K,isInitialLoading:ct,isLoading:ct,data:R,dataUpdatedAt:d.dataUpdatedAt,error:at,errorUpdatedAt:ot,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>y.dataUpdateCount||d.errorUpdateCount>y.errorUpdateCount,isFetching:N,isRefetching:N&&!W,isLoadingError:K&&!ut,isPaused:d.fetchStatus==="paused",isPlaceholderData:j,isRefetchError:K&&ut,isStale:nt(t,i),refetch:this.refetch,promise:s(this,S),isEnabled:g(i.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const m=z=>{O.status==="error"?z.reject(O.error):O.data!==void 0&&z.resolve(O.data)},V=()=>{const z=h(this,S,O.promise=dt());m(z)},F=s(this,S);switch(F.status){case"pending":t.queryHash===r.queryHash&&m(F);break;case"fulfilled":(O.status==="error"||O.data!==F.value)&&V();break;case"rejected":(O.status!=="error"||O.error!==F.reason)&&V();break}}return O}updateResult(){const t=s(this,b),i=this.createResult(s(this,n),this.options);if(h(this,I,s(this,n).state),h(this,P,this.options),s(this,I).data!==void 0&&h(this,D,s(this,n)),J(i,t))return;h(this,b,i);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:c}=this.options,u=typeof c=="function"?c():c;if(u==="all"||!u&&!s(this,M).size)return!0;const o=new Set(u??s(this,M));return this.options.throwOnError&&o.add("error"),Object.keys(s(this,b)).some(_=>{const f=_;return s(this,b)[f]!==t[f]&&o.has(f)})};l(this,a,gt).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&l(this,a,tt).call(this)}},v=new WeakMap,n=new WeakMap,H=new WeakMap,b=new WeakMap,I=new WeakMap,P=new WeakMap,S=new WeakMap,E=new WeakMap,A=new WeakMap,U=new WeakMap,D=new WeakMap,w=new WeakMap,x=new WeakMap,Q=new WeakMap,M=new WeakMap,a=new WeakSet,L=function(t){l(this,a,it).call(this);let i=s(this,n).fetch(this.options,t);return t?.throwOnError||(i=i.catch(X)),i},Z=function(){l(this,a,et).call(this);const t=B(this.options.staleTime,s(this,n));if(Y||s(this,b).isStale||!ft(t))return;const r=St(s(this,b).dataUpdatedAt,t)+1;h(this,w,setTimeout(()=>{s(this,b).isStale||this.updateResult()},r))},$=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(s(this,n)):this.options.refetchInterval)??!1},q=function(t){l(this,a,st).call(this),h(this,Q,t),!(Y||g(this.options.enabled,s(this,n))===!1||!ft(s(this,Q))||s(this,Q)===0)&&h(this,x,setInterval(()=>{(this.options.refetchIntervalInBackground||Et.isFocused())&&l(this,a,L).call(this)},s(this,Q)))},tt=function(){l(this,a,Z).call(this),l(this,a,q).call(this,l(this,a,$).call(this))},et=function(){s(this,w)&&(clearTimeout(s(this,w)),h(this,w,void 0))},st=function(){s(this,x)&&(clearInterval(s(this,x)),h(this,x,void 0))},it=function(){const t=s(this,v).getQueryCache().build(s(this,v),this.options);if(t===s(this,n))return;const i=s(this,n);h(this,n,t),h(this,H,t.state),this.hasListeners()&&(i?.removeObserver(this),t.addObserver(this))},gt=function(t){yt.batch(()=>{t.listeners&&this.listeners.forEach(i=>{i(s(this,b))}),s(this,v).getQueryCache().notify({query:s(this,n),type:"observerResultsUpdated"})})},mt);function xt(e,t){return g(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function bt(e,t){return xt(e,t)||e.state.data!==void 0&&rt(e,t,t.refetchOnMount)}function rt(e,t,i){if(g(t.enabled,e)!==!1&&B(t.staleTime,e)!=="static"){const r=typeof i=="function"?i(e):i;return r==="always"||r!==!1&&nt(e,t)}return!1}function Rt(e,t,i,r){return(e!==t||g(r.enabled,e)===!1)&&(!i.suspense||e.state.status!=="error")&&nt(e,i)}function nt(e,t){return g(t.enabled,e)!==!1&&e.isStaleByTime(B(t.staleTime,e))}function Ft(e,t){return!J(e.getCurrentResult(),t)}var Ot=C.createContext(!1),Pt=()=>C.useContext(Ot);Ot.Provider;function Ut(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Dt=C.createContext(Ut()),Mt=()=>C.useContext(Dt),_t=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},kt=e=>{C.useEffect(()=>{e.clearReset()},[e])},Lt=({result:e,errorResetBoundary:t,throwOnError:i,query:r,suspense:c})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(c&&e.data===void 0||Tt(i,[e.error,r])),Bt=e=>{if(e.suspense){const t=r=>r==="static"?r:Math.max(r??1e3,1e3),i=e.staleTime;e.staleTime=typeof i=="function"?(...r)=>t(i(...r)):t(i),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},Ht=(e,t)=>e.isLoading&&e.isFetching&&!t,At=(e,t)=>e?.suspense&&t.isPending,vt=(e,t,i)=>t.fetchOptimistic(e).catch(()=>{i.clearReset()});function jt(e,t,i){const r=Pt(),c=Mt(),u=It(),o=u.defaultQueryOptions(e);u.getDefaultOptions().queries?._experimental_beforeQuery?.(o),o._optimisticResults=r?"isRestoring":"optimistic",Bt(o),_t(o,c),kt(c);const _=!u.getQueryCache().get(o.queryHash),[f]=C.useState(()=>new t(u,o)),y=f.getOptimisticResult(o),k=!r&&e.subscribed!==!1;if(C.useSyncExternalStore(C.useCallback(d=>{const j=k?f.subscribe(yt.batchCalls(d)):X;return f.updateResult(),j},[f,k]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),C.useEffect(()=>{f.setOptions(o)},[o,f]),At(o,y))throw vt(o,f,c);if(Lt({result:y,errorResetBoundary:c,throwOnError:o.throwOnError,query:u.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw y.error;return u.getDefaultOptions().queries?._experimental_afterQuery?.(o,y),o.experimental_prefetchInRender&&!Y&&Ht(y,r)&&(_?vt(o,f,c):u.getQueryCache().get(o.queryHash)?.promise)?.catch(X).finally(()=>{f.updateResult()}),o.notifyOnChangeProps?y:f.trackResult(y)}function Kt(e,t){return jt(e,wt)}export{Kt as u};
